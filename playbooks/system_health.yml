---
- name: System Health Monitoring Playbook
  hosts: all
  become: yes

  tasks:
    - name: Check disk usage
      shell: df -h
      register: disk

    - name: Check memory usage
      shell: free -m
      register: memory

    - name: Check CPU load
      shell: top -bn1 | grep "Cpu"
      register: cpu

    - name: Generate system health report
      copy:
        dest: /var/log/system_health_report.log
        content: |
          ====================================
          üñ•Ô∏è  System Health Report
          ====================================
          Hostname: {{ inventory_hostname }}
          Date: {{ ansible_date_time.date }} {{ ansible_date_time.time }}

          --- DISK USAGE ---
          {{ disk.stdout }}

          --- MEMORY USAGE ---
          {{ memory.stdout }}

          --- CPU USAGE ---
          {{ cpu.stdout }}

          Report generated by Ansible
